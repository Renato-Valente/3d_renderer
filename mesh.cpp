#include "mesh.hpp"
#include <string.h>


std::vector <vec3_t> vertices;
std::vector <face_t> faces;

mesh_t mesh = {
    vertices,
    faces,
   {0,0,0}
};


vec3_t cube_vertices[n_cube_vertices] = {
 {0.885739, 0.001910 ,-0.380334},
 {0.322026, 0.035470 ,-0.433102},
 {-0.907053, 0.017201, -0.352922},
 {1.047128 ,0.048117 ,-0.183264},
 {0.362277 ,0.114239 ,-0.142520},
 {1.125941 ,0.131116 ,-0.101088},
 {1.199510 ,0.242528 ,-0.056765},
 {1.529867 ,0.098373 ,-0.067674},
 {1.566378 ,0.011323 ,-0.146393},
 {1.762624 ,0.050007 ,-0.049581},
 {1.789931 ,-0.007335, -0.103633},
 {-1.226703 ,0.083896, -0.231401},
 {-1.226703 ,0.083896, -0.043034},
 {-1.304689 ,0.083896, -0.142520},
 {-0.560223 ,0.071221, -0.299735},
 {0.779234 ,-0.185506, -0.231401},
 {-0.408812 ,-0.168000, -0.231401},
 {-1.226703 ,-0.023036, -0.043034},
 {-1.226703 ,-0.023036, -0.231464},
 {-1.304556 ,-0.023036, -0.142520},
 {-0.442164 ,-0.009523, -0.406435},
 {-0.875984 ,0.035470 ,-1.161559},
 {-0.727243 ,0.035470 ,-1.316844},
 {-0.494141 ,0.035470 ,-1.316844},
 {-1.376274 ,0.035470 ,-0.874979},
 {-1.417826, 0.035470 ,-0.043034},
 {1.016889 ,0.247035 ,-0.041089},
 {-0.910201, 0.071705, -0.260759},
 {-0.910201, 0.114239, -0.142520},
 {-1.347072 ,0.053931, -0.291132},
 {-0.949411 ,0.058716, -0.324121},
 {-1.086356 ,0.618995, -0.582384},
 {-0.945513 ,0.618995, -0.582384},
 {-0.820765 ,0.618995, -0.582384},
 {-1.074394 ,0.035470, -0.526090},
 {-1.347072 ,0.017010, -0.291132},
 {-1.420792 ,0.035470, -0.231401},
 {-1.704863 ,0.035470, -0.554642},
 {-1.607890 ,0.035470, -0.874979},
 {1.142508 ,0.156204 ,-0.091107},
 {0.821684 ,0.218761 ,-0.028011},
 {1.453805 ,0.131564 ,-0.065163},
 {0.835981 ,0.180467 ,-0.042103},
 {0.885739 ,0.001910 ,0.380334},
 {0.322026 ,0.035470 ,0.433102},
 {-0.907053, 0.017201, 0.352922},
 {1.047128 ,0.048117 ,0.183264},
 {0.362277 ,0.114239 ,0.142520},
 {1.125941 ,0.131116 ,0.101088},
 {1.199510 ,0.242528 ,0.056765},
 {1.529867 ,0.098373 ,0.067674},
 {1.566378 ,0.011323 ,0.146393},
 {1.762624 ,0.050007 ,0.049581},
 {1.789931 ,-0.007335, 0.103633},
 {-1.226703, 0.083896, 0.231401},
 {-1.226703, 0.083896, 0.043034},
 {-1.304689, 0.083896, 0.142520},
 {-0.560223, 0.071221, 0.299735},
 {0.779234 ,-0.185506, 0.231401},
 {-0.408812, -0.168000, 0.231401},
 {-1.226703, -0.023036 ,0.043034},
 {-1.226703, -0.023036, 0.231464},
 {-1.304556, -0.023036, 0.142520},
 {-0.442164, -0.009523, 0.406435},
 {-0.875984, 0.035470 ,1.161559},
 {-0.727243, 0.035470 ,1.316844},
 {-1.376274, 0.035470 ,0.874979},
 {-1.417826, 0.035470 ,0.043034},
 {1.016889 ,0.247035 ,0.041089},
 {-0.910201, 0.071705, 0.260759},
 {-0.910201, 0.114239, 0.142520},
 {-1.347072, 0.053931, 0.291132},
 {-0.949411, 0.058716, 0.324121},
 {-1.086356, 0.618995, 0.582384},
 {-0.945513, 0.618995, 0.582384},
 {-0.820765, 0.618995, 0.582384},
 {-1.074394, 0.035470, 0.526090},
 {-1.347072, 0.017010, 0.291132},
 {-1.420792, 0.035470, 0.231401},
 {-1.704863, 0.035470, 0.554642},
 {-1.607890, 0.035470, 0.874979},
 {1.142508 ,0.156204 ,0.091107},
 {0.821684 ,0.218761 ,0.028011},
 {1.453805 ,0.131564 ,0.065163},
 {0.835981 ,0.180467 ,0.042103},
 {-0.910201, 0.094558, 0.000000},
 {0.403590 ,0.158204 ,0.000000},
 {1.236021 ,0.268974 ,0.000000},
 {1.568094 ,0.113851 ,0.000000},
 {1.791648 ,0.062518 ,0.000000},
 {2.014232 ,-0.030625, 0.000000},
 {1.566378 ,-0.120168, 0.000000},
 {1.789931 ,-0.082458, 0.000000},
 {0.919486 ,-0.169810, 0.000000},
 {-0.408812, -0.167592, 0.000000},
 {-1.226703, 0.078200 ,0.000000},
 {-1.226703, -0.023036 ,0.000000},
{-1.442453 ,0.035470 ,0.000000},
 {1.016889 ,0.266178 ,0.000000},
 {1.487051 ,0.151710 ,0.000000},
 {0.817113 ,0.231006 ,0.000000}
};

face_t cube_faces[n_cube_faces] = {
    {1, 5, 4},
 {5 ,87 ,88},
 {4 ,88 ,6},
 {43 ,41 ,27},
 {41 ,100, 27},
 {89 ,42, 7},
 {7 ,42 ,40},
 {6 ,9 ,4},
 {9 ,10 ,11},
 {90 ,10,8},
 {11 ,10 ,92},
 {10 ,91 ,92},
 {15 ,29 ,5},
 {11 ,93 ,9},
 {11 ,92 ,94},
 {4 ,93 ,95},
 {16 ,4 ,95},
 {16 ,96 ,17},
 {5 ,2 ,15},
 {15 ,24 ,23},
 {15 ,22 ,35},
 {2 ,1 ,16},
 {17 ,2 ,16},
 {30 ,37 ,12},
 {12 ,20 ,14},
 {20 ,13 ,14},
 {21 ,24 ,2},
 {21 ,3 ,35},
 {19 ,12 ,37},
 {15 ,23 ,22},
 {18 ,96 ,98},
 {98 ,26 ,18},
 {97 ,87 ,13},
 {13 ,18 ,26},
 {97 ,26 ,99},
 {35 ,22 ,21},
 {22 ,23 ,21},
 {3 ,17 ,19},
 {31 ,34 ,15},
 {31 ,32 ,33},
 {20 ,19 ,17},
 {20 ,17 ,96},
 {18 ,20 ,96},
 {29 ,28 ,12},
 {87 ,5 ,29},
 {25 ,30 ,35},
 {31 ,15 ,35},
 {30 ,12 ,28},
 {30 ,31 ,35},
 {30 ,38 ,37},
 {28 ,34 ,33},
 {28 ,32 ,30},
 {36 ,19 ,37},
 {36 ,25 ,35},
 {36 ,38 ,39},
 {36 ,35 ,3},
 {3 ,19 ,36},
 {25 ,39 ,30},
 {29 ,14 ,13},
 {14 ,29 ,12},
 {87 ,29 ,13},
 {42 ,6 ,40},
 {43 ,6 ,88},
 {102 ,41 ,88},
 {101 ,8 ,42},
 {27 ,7 ,40},
 {40 ,43 ,27},
 {41 ,102 ,100},
 {100 ,89 ,27},
 {89 ,7 ,27},
 {101 ,90 ,8},
 {43 ,40 ,6},
 {88 ,41 ,43},
 {42 ,8 ,6},
 {36 ,37 ,38},
 {28 ,33 ,32},
 {28 ,15 ,34},
 {30 ,39 ,38},
 {31 ,30 ,32},
 {31 ,33 ,34},
 {3 ,21 ,17},
 {97 ,13 ,26},
 {98 ,99 ,26},
 {21 ,23 ,24},
 {20 ,18 ,13},
 {12 ,19 ,20},
 {17 ,21 ,2},
 {15 ,2 ,24},
 {16 ,95 ,96},
 {16 ,1 ,4},
 {4 ,9 ,93},
 {11 ,94 ,93},
 {15 ,28 ,29},
 {90 ,91 ,10},
 {9 ,8 ,10},
 {6 ,8 ,9},
 {89 ,101 ,42},
 {4 ,5 ,88},
 {1 ,2 ,5},
 {44 ,47 ,48},
 {48 ,88 ,87},
 {47 ,49 ,88},
 {86 ,70 ,84},
 {84 ,70 ,100},
 {89 ,50 ,85},
 {50 ,83 ,85},
 {49 ,47 ,52},
 {52 ,54 ,53},
 {90 ,51 ,53},
 {54 ,92 ,53},
 {53 ,92 ,91},
 {58 ,48 ,72},
 {54 ,52 ,93},
 {54 ,94 ,92},
 {59 ,95 ,47},
 {59 ,60 ,96},
 {48 ,58 ,45},
 {58 ,78 ,67},
 {58 ,78 ,113},
 {60 ,59 ,45},
 {73 ,55 ,80},
 {55 ,57 ,63},
 {63 ,57 ,56},
 {64 ,45 ,67},
 {62 ,80 ,55},
 {58 ,65 ,66},
 {61 ,98 ,96},
 {98 ,61 ,69},
 {97 ,56 ,87},
 {56 ,69 ,61},
 {97 ,99 ,69},
 {78 ,64 ,65},
 {65 ,64 ,66},
 {46 ,62 ,60},
 {74 ,58 ,77},
 {74 ,76 ,75},
 {63 ,60 ,62},
 {63 ,96 ,60},
 {61 ,96 ,63},
 {72 ,55 ,71},
 {87 ,72 ,48},
 {68 ,78 ,73},
 {74 ,78 ,58},
 {73 ,71 ,55},
 {73 ,78 ,74},
 {73 ,80 ,81},
 {71 ,76 ,77},
 {71 ,73 ,75},
 {79 ,80 ,62},
 {79 ,78 ,68},
 {79 ,82 ,81},
 {79 ,46 ,78},
 {46 ,79 ,62},
 {68 ,73 ,82},
 {79 ,68 ,82},
 {72 ,56 ,57},
 {57 ,55 ,72},
 {87 ,56 ,72},
 {85 ,83 ,49},
 {102, 88, 84},
 {101 ,85, 51},
 {70 ,83 ,50},
 {83 ,70 ,86},
 {84 ,100 ,102},
 {100, 70, 89},
 {89 ,70 ,50},
 {101 ,51, 90},
 {86 ,49 ,83},
 {88 ,80 ,84},
 {85 ,49, 51},
 {79 ,81 ,80},
 {71 ,75 ,76},
 {71 ,77 ,58},
 {73 ,81 ,82},
 {74 ,75 ,73},
 {74 ,77 ,76},
 {46 ,60 ,64},
 {97 ,69 ,56},
 {98 ,69 ,99},
 {64 ,67 ,66},
 {63 ,56 ,61},
 {55 ,63 ,62},
 {58 ,67 ,45},
 {59 ,96 ,95},
 {59 ,47 ,44},
 {47 ,93 ,52},
 {54 ,93 ,94},
 {90 ,53 ,91},
 {52 ,53 ,51},
 {49 ,52 ,51},
 {89 ,85 ,101},
 {47 ,88 ,48},
 {44 ,48, 45}
};

void load_cube_mesh_data(){
    for(int i = 0; i<n_cube_vertices; i++){
        vec3_t vertice = cube_vertices[i];
        mesh.vertices.push_back(vertice);
    }

    for(int i = 0; i< n_cube_faces; i++){
        face_t face = cube_faces[i];
        mesh.faces.push_back(face);
    }
}

void load_mesh(char* filename) {
    FILE* file;
    file = fopen(filename, "r");
    char line[1024];

    while (fgets(line, 1024, file)) {
        // Vertex information
        if (strncmp(line, "v ", 2) == 0) {
            vec3_t vertex;
            sscanf(line, "v %f %f %f", &vertex.x, &vertex.y, &vertex.z);
            mesh.vertices.push_back(vertex);
        }
        // Face information
        if (strncmp(line, "f ", 2) == 0) {
            int vertex_indices[3];
            int texture_indices[3];
            int normal_indices[3];
            sscanf(
                line, "f %d/%d/%d %d/%d/%d %d/%d/%d",
                &vertex_indices[0], &texture_indices[0], &normal_indices[0], 
                &vertex_indices[1], &texture_indices[1], &normal_indices[1], 
                &vertex_indices[2], &texture_indices[2], &normal_indices[2]
            ); 
            face_t face = {
                vertex_indices[0],
                vertex_indices[1],
                vertex_indices[2]
            };
            mesh.faces.push_back(face);
        }
    }
}


